# 5장 모든 것을 토큰화

이더리움 네트워크는 암호화폐 펀드를 조성하고 투자자에게 토큰을 교환할 수 있는 프로젝트를 가능하게 하는 **ICO(암호화폐공개)** 를 통해 ‘모든 것을 토큰화한다’는 개념이 확산하는 계기가 되었다.

### **개념이 시작된 주목할 만한 예시**

---

**마스터코인**

개발자 J.R 윌렛은 2011년부터 마스터코인 백서를 작성했다. ‘비트코인 위에 완전히 새로운 통화, 상품, 증권 네트워크를 만드는 것’ 을 목표했다.

그는 비트코인 투자로 커뮤니티의 지지를 얻을 수 있다는 것을 깨달아, 2013년 첫 토큰 판매인 ICO 를 열었다. 이때 마스터코인은 3,700 BTC (약 230만 달러) 를 조달할 수 있었다.

**이더리움**

비탈릭 부테린이 2013년 11월 비트코인, 마스터코인 등을 기반으로 ‘차세대 스마트 콘트랙트와 탈중앙 애플리케이션 플랫폼’ 이라는 이더리움 백서를 발간으로 시작됐다. 백서를 배포하고 커뮤니티가 모이면서 2014 년 2월에 이더리움 프로젝트를 공개했다. 이더리움의 ICO 는 큰 성공을 이루었고 이는 미래에 많은 ICO 들의 공론의 대상이 되었다.

**노시스**

노시스(Gnosis)는 분산형 애플리케이션 예측 시장 플랫폼으로, 노시스 멀티시그 지갑은 이더리움 생태계에서 널리 사용되는 지갑이며 토큰의 콜드 스토리지 같은 응용 분야에 사용된다.

노시스 프로젝트의 ICO 의 가장 흥미로운 측면은 더치형 경매 시스템이었다. 이 시스템은 ICO 기간동안 토큰의 가치가 하락할 수 있게 했다. 이는 투자자들이 최고 가격을 얻기위해 기다리도록 장려했다. ICO 대부분 투자자가 일찍 들어갈 수록 더 저렴한 토큰이 제공된다. 노시스는 프로젝트와 설립자에게 귀속된 암호화폐 95%를 유지하면서 15분 만에 3억 달러 이상을 모금해 대성공을 거뒀다.

**EOS**

다니엘 라리머의 아이디어인 [EOS.IO](http://EOS.IO) 는 EOS 화폐 보유자 사이에 컴퓨팅 자원을 동등 분배함으로써 블록체인의 확장성 문제를 해결하는 것을 목표로 하는 블록체인 프로토콜이다. 이 프로젝트는 토큰의 판매량, 가격의 상한선이 없었고 역사상 가장 큰 ICO 모금액인 연간 40억 달러 이상이 조성됐다.

EOS 라고 하는 **ERC-20** 토큰을 위한 기금이었는데, 네이티브 블록체인이 준비되면 네이티브 토큰으로 전환되었다.

### 이더리움 플랫폼의 토큰

토큰을 만들면 개발자가 이더리움 네트워크에 화폐를 만들수 있으며 사람들은 암호화 프로토콜로 블록체인에서 자산을 발행할 수 있게 된다. 이더리움의 **ERC-20** 표준은 네트워크 상의 블록체인 자산에 대한 참조 구현체로서 토큰이 다양한 서비스에 대한 속성을 쉽게 구축할 수 있게 했다.

토큰은 현실 자산과 제대로 연결될 수 있느냐에 따라 가치를 표현할 수 있는 능력이 있다.

**대체 가능한 토큰과 대체 불가능한 토큰**

토큰을 만들 때 가장 중요한 차별화 요소 중 하나는 토큰의 대체 가능 여부이다.

- 대체 가능한 토큰
    - 모두 같은 가치를 가지고 교환할 수 있다.
    - 미국 달러와 같은 통화, 비트코인, 이더리움 등
- 대체 불가능한 토큰
    - 같은 가치를 가지고 교환할 수 없다.
    - 자동차, 주택 등의 품목
    - 스마트 콘트랙트를 통해 만들 수 있는 ERC-721 토큰으로 표현

**토큰이 필요한 이유**

블록체인 기반 솔루션을 개발할 때 개발자가 물어야 할 실존적 질문은 ‘토큰이 필요한가?’ 일 것이다. 토큰화에 뚜렷한 동기가 없다면 블록체인 기반 프로젝트에 유용하지 않다. 

**에어드롭**

토큰을 배포하는 주요 방법은 ICO 와 유사한 제안이 있는데, 또 하나의 대안은 에어드롭이다.

블록체인의 네트워크 효과를 활용하기 위해 많은 사용자에게 암호화폐를 무료로 주거나 저비용을 들여 분배하는 방식이다.

### 이더리움 코멘트 요청(ERC) 이해

개발자가 더 나은 스마트 콘트랙트를 작성할 수 있게 EVM 의 기능을 향상시킴으로써 커뮤니티는 ERC 로 공식화된 표준을 만들기 시작했다.

표준은 앱이 스마트 컨트랙트와 상호작용하기 위해 어떤 기능과 입력을 호출할 수 있게 하기 때문에 중요하다. 

**ERC-20**

ERC 토큰의 가장 일반적인 표준으로, 이를 준수하는 모든 스마트 컨트랙트는 Transfer, Approval 두가지 이벤트로 구현된다.

**ERC-721**

대체 불가능한 토큰(NFT)의 표준이다. 각 토큰은 대체 가능한 토큰과 달리 서로 다른 속성을 가져 디지털 희소성을 허용한다.

**ERC-777**

차세대 대체 가능 토큰인 ERC-20 을 위한 표준이다. ERC-20 토큰에 대해 몇 가지 개선사항이 포함되어 있으며, 토큰이 전송되는 방식이 가장 중요하다.

기존 ERC-20 은 토큰을 이동시키기 위해 Push, Pull Transaction 방식이 존재한다. 이 방식들은 각자 단점이 있는데, 이 표준은 개선사항을 도입해 해결할 것을 제안했다.

- authorizeOperator, revokeOperator ( 주소 연산자 )
    - 토큰 소유자들이 스마트 컨트랙트에서 토큰을 대신 전송하도록 허용 혹은 철회할 수 있다. 이는 ERC-20 Pull 방식의 변형이며 토큰 전송 시 마다 오퍼레이터 승인 대신 한 번만 승인하면 되고 이후 추가적인 전송마다 오퍼레이터가 대신 토큰을 전송할 수 있다.
- tokenReceived, tokensToSend
    - 수신측에서는 어떤 ERC-777 토큰을 받거나 거부할 지 식별할 수 있다. 거부하면 토큰 전송이 완료되지 않는다.
- send
    - Push Transaction 에는 토큰과 수신 컨트랙트에서 취급할 데이터 필드가 포함된다.

**ERC-1155**

게임에서 가상 상품을 추적하도록 설계된 표준이다. 이 표준은 ERC-20, ERC-721 속성이 포함되어 있다. 표준을 만든 엔진은 게임 퍼블리셔가 블록체인 플랫폼을 제공하고 있다.

### 다중 서명 컨트랙트

지갑에서 개인키가 손상되면 자금의 도난을 막을 수 없다. 다중 서명 지갑(Multi-sig)의 목적은 자금을 보내기 위해 개인키 여러 개를 요구함으로써 위험을 낮추는 것이다.

다중 서명 컨트랙트는 M(최소 서명 수)개의 N(승인할 이더리움 주소 수) 개의 서명이 필요하다. M < N 이며, 예를 들면 2/3 개의 서명만 있으면 트랜잭션 완료가 가능하다.

ICO 를 하는 단체는 보통 다중 서명 지갑으로 모금한다. 이런 지갑의 투명성은 언제든 투자자가 자금을 감시할 수 있어 신뢰성을 높인다.

- **다중 서명 프로세스 (3/5 조건일 경우)**
    1. 트랜잭션 수행 권한이 있는 소유자 주소 중 하나가 `submitTransaction` 함수를 호출해 트랜잭션 세부 사항을 제출한다. 이는 다음 두 가지 이벤트를 수행한다.
        1. 요청한 거래의 세부사항을 저장한다.
        2. 거래를 확인하는 주소 목록에 소유자 주소를 추가한다. 이 주소는 트랜잭션을 시작하고 트랜잭션을 확인한다.
    2. 두 번째 소유자는 두 번째 서명을 주기 위해 `confirmTransaction` 을 호출한다.
    3. 세 번째 소유자도 같은 함수를 호출하고 다음 두 가지 이벤트로 이어진다.
        1. 제3의 소유자가 트랜잭션을 컨펌한다.
        2. 컨트랙트는 필요한 서명이 모두 주어졌다는 것을 인정하고 처음 제출된 세부사항을 사용해 트랜잭션을 실행한다.

### 탈중앙화 거래소 컨트랙트

이더리움 이전의 코인베이스, 비트스탬프 같은 모든 중앙집중화 거래소는 신뢰할 수 있는 플랫폼 역할을 하기 위해 다음의 조치를 취해야 한다.

1. 안전한 암호화 입출금 장소를 제공하고 자금을 에스크로에 보관한다.
2. 암호화폐 거래 가격을 합의하기 위해 오더북을 제출한다.
3. 당사자 간에 암호화폐를 교환한다.

스마트 컨트랙트에는 다음의 기능이 있다.

1. ETH, ERC-20 토큰을 송수신하고 보관한다.
2. EOA 계정의 가격 요청을 기록한다.
3. 두 가지 가격 요청이 일치할 경우 해당 암호화폐의 소유권을 변경한다.

중앙집중화 거래소는 모든 코드가 클라우드 서비스에 호스팅된다. 반면 IDEX 같은 탈중앙화 거래소는 프론트엔드는 비슷하나 백엔드 코드는 스마트 컨트랙트에 작성되어 이더리움 네트워크를 통해 배포된다.

**탈중앙화 거래의 장점**

- 개방된 거래소이기 때문에 거래의 **투명성 향상**
- 감사 완료된 스마트 컨트랙트의 안전성이 오픈되어 있어 **대응 위험 감소**

**탈중앙화 거래의 장점**

- 느린 속도 (약 10 sec ~ 1 min)
- 비싼 가격 (모든 주문 조작에 Gas 소모)
- 일반 사용자에게 어려움 (복잡한 기술적 의존도가 높음)
