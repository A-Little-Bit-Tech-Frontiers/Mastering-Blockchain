# 💡 이더리움 플랫폼의 토큰

- ERC-20 토큰 표준은 이더리움 네트워크에서 누구나 암호화폐를 쉽게 만들 수 있도록 해주며, 다양한 거래소·지갑·서비스에서 호환 가능하게 해줌.
-	이더리움 외에도 토큰 발행이 가능한 플랫폼은 있지만, ERC-20은 가장 쉽고 안전한 방식 중 하나로 여겨짐.
-	토큰은 단순한 기술 프로젝트를 넘어 기존 금융 시스템에 혁신을 가져올 가능성이 있음.
-	현실 자산과 블록체인의 연결이 중요하며, 연결이 잘 될수록 토큰의 가치가 높아짐.
-	부동산, 미술품, 자동차, 주식, 채권 등 다양한 실물 자산에 블록체인 기반 토큰을 적용할 수 있음.
-	예시로 오하이오주는 부동산 거래 기록 보관에 블록체인을 도입하는 것을 고려 중.

![image](https://github.com/user-attachments/assets/15216e9e-e7f7-4cbc-a0a8-515afd164411)

## 대체 가능한 토큰과 대체 불가능한 토큰

### 대체 가능성과 토큰의 구분

- 대체 가능한 토큰: 동일한 가치로 서로 교환 가능함.
	-	예: 미국 달러, 비트코인, 이더리움, ERC-20 토큰
- 대체 불가능한 토큰(NFT): 고유하고 유일한 가치를 지님.
  - 예: 자동차, 주택, CryptoKitties (ERC-721 기반)

### 스마트 콘트랙트와 감사

- 토큰 발행 전에는 스마트 콘트랙트 코드를 제3자가 감사하는 것이 중요함.
-	감사 서비스 제공업체로는 Trail of Bits, Chainsecurity 등이 있음.

### 핵심 요점

- 이더리움은 다양한 토큰 유형을 지원하여 현실 세계와 연결된 여러 암호화폐 응용 사례를 가능하게 함.
-	토큰 설계 시에는 대체 가능성 여부가 중요한 요소이며, 목적에 맞는 토큰 표준 선택이 필요함.

## 토큰이 필요한 이유

### 수수료 시장과 자산 불안정성 문제

- 비트코인이나 이더리움처럼 수수료(트랜잭션 비용)는 네트워크 수요에 따라 급변할 수 있음.
-	수요가 높으면 수수료가 올라가고, 결국 가장 높은 입찰가를 낸 사용자만 거래가 처리됨.
-	이러한 구조는 이더리움의 가스 요금과 토큰 가격에도 동일하게 적용됨.

### 토큰의 한계와 부적합한 경우

-	모금만을 위한 토큰은 프로젝트 가치 측면에서 부적절할 수 있음.
-	자산 가치를 안정적으로 유지하려는 목적이라면 일반 토큰보다 스테이블코인이 더 나은 대안이 될 수 있음.
-	변동성이 큰 자산 기반 토큰은 처리 시스템에 문제를 일으킬 수 있음.

### 핵심 결론

- 모든 프로젝트가 토큰을 필요로 하는 것은 아님.
-	단순한 모금이나 불안정한 자산 구조를 지닌 프로젝트라면, 다른 접근 방식(예: 스테이블코인) 을 고려하는 것이 더 합리적임.
-	토큰 발행 전에 반드시 실질적인 기능성과 경제적 역할이 있는지 검토해야 함.

## 에어드롭

### 에어드롭이란?
-	토큰을 무료 혹은 매우 저렴한 비용으로 사용자에게 배포하는 방식
-	주로 ICO(Initial Coin Offering) 의 대안으로 사용됨
-	이미 존재하는 블록체인 생태계의 네트워크 효과를 활용해, 사용자 기반 확보 및 암호화폐 채택 촉진이 목적

### 대표 사례

-	스텔라 재단(XLM): Blockchain.info 지갑 사용자들에게 1억 2,500만 달러 상당의 토큰을 배포함
- 에어드롭은 초기 사용자 확보와 홍보 수단으로는 효과적이지만, 경제적/법적 리스크와 토큰 가치 희석 문제를 동반할 수 있으므로 전략적으로 신중하게 활용되어야 함.

# 💡 이더리움 코멘트 요청(ERC) 이해

- EVM(Ethereum Virtual Machine) 의 기능을 향상시켜, 더 나은 스마트 콘트랙트 개발을 지원하기 위해 이더리움 커뮤니티는 ERC(Ethereum Request for Comments) 라는 표준 제안 체계를 만들기 시작함.
-	ERC 표준은 스마트 콘트랙트와 상호작용하는 앱들이 어떤 기능과 입력값을 사용해야 할지 예측 가능하게 만들기 때문에 매우 중요함.
-	모든 ERC는 Ethereum Improvement Proposal(EIP) 의 일환으로 제안되어, 심사 및 커뮤니티 논의를 거친 뒤 채택됨.
-	이 프로세스는 비트코인의 BIP(Bitcoin Improvement Proposal) 프로세스와 유사함.

## ERC-20

### ERC-20이란?

-	이더리움에서 가장 널리 사용되는 토큰 표준으로, 토큰 간 호환성과 상호작용 가능성을 보장함.
- 모든 ERC-20 스마트 콘트랙트는 정해진 함수와 이벤트 구조를 따라야 함.

### 기본 구성 요소

- 함수 (표 5-1): 토큰 전송, 잔액 조회, 승인 등 기본 기능을 제공

![image](https://github.com/user-attachments/assets/984baecd-9706-459d-b565-bed6516ef8b6)

- 이벤트 (표 5-2)
	-	Transfer: 토큰이 전송될 때 발생
	-	Approval: 승인된 주소가 특정 수량의 토큰을 사용할 수 있게 될 때 발생

![image](https://github.com/user-attachments/assets/ed49dfd6-77a8-4c45-acc0-377142551795)

-	애플리케이션(예: 지갑)은 이러한 이벤트를 실시간으로 감지해 UI에 반영할 수 있음 (책의 Mastering上lockchairCToken.sol 예제 참조)

## ERC-721

### ERC-721: 대체 불가능한 토큰 (NFT) 표준

- ERC-721은 Non-Fungible Token(NFT), 즉 고유성과 희소성을 가진 디지털 자산을 표현하는 표준이다.
-	ERC-20과 달리, 각 토큰은 고유한 속성을 가지고 있으며 서로 교환이 불가능하다.
-	디지털 자산이 복제되거나 위조되기 쉬운 기존 환경과 달리, 블록체인을 이용해 디지털 희소성을 실현할 수 있게 됨.

### CryptoKitties 사례

- CryptoKitties는 이더리움 블록체인 위에서 ERC-721 기반으로 구현된 디지털 고양이 수집 게임이다.
-	각 고양이는 고유한 유전 정보, 생년월일, 부모 정보 등 개별 속성을 블록체인에 저장하고 있음.
-	중앙 데이터베이스가 아닌 스마트 콘트랙트에서 getKitty 함수로 직접 정보 조회 가능

![image](https://github.com/user-attachments/assets/dbc44b51-bca5-4c61-987e-937bf2eaa554)

### 정리

- ERC-721은 각 토큰이 고유한 속성을 갖는 NFT를 위한 표준이며, 디지털 자산에 진정한 희소성과 소유권을 부여할 수 있다.
- CryptoKitties는 이러한 개념을 현실화한 대표적인 사례이며, 모든 정보는 이더리움 스마트 콘트랙트 내에서 직접 조회 가능하다.

## ERC-777

### ERC-777이란?

- ERC-20의 단점을 보완하기 위해 제안된 새로운 대체 가능 토큰 표준
-	토큰 전송 시 스마트 콘트랙트와의 상호작용을 보다 안전하고 정교하게 처리 가능

### ERC-20의 두 가지 전송 방식

- Push 트랜잭션
  - transfer(to, amount) → 발신자가 수신자에게 토큰을 전송 (기본 방식)
  - 스마트 콘트랙트가 수신 사실을 인식하지 못하는 문제 있음
	
- Pull 트랜잭션
  - approve(spender, amount) + transferFrom(from, to, amount)
  - 수신자가 송신자의 계정에서 토큰을 “끌어오며”, 코드 실행 가능
  - DEX 등에서 사용되지만 실수 시 토큰 손실 위험 존재
 
### ERC-777의 주요 개선 (위 단점 보완)

- 오퍼레이터 권한 위임 (authorizeOperator, revokeOperator)
  - 토큰 소유자가 다른 주소(오퍼레이터)에게 자신의 토큰을 전송할 수 있는 권한을 부여하거나 철회할 수 있습니다.
  - ERC-20에서 approve + transferFrom의 반복 사용을 간소화한 형태로, 한 번의 승인으로 여러 번 전송 가능합니다.

- 수신 후크 (tokensReceived)
  - 토큰을 받는 스마트 콘트랙트에서 수신 여부를 감지하고 거부할 수 있는 기능입니다.
  - 예를 들어, 원하지 않는 토큰이 전송되면 이를 거부하고 트랜잭션을 되돌릴 수 있습니다.

- 전송 전 후크 (tokensToSend)
  -	토큰을 보내기 전에 송신자가 조건을 확인하고 전송을 중단할 수 있는 후크입니다.
     스마트 콘트랙트가 토큰 전송 직전에 트랜잭션을 검토하고 취소할 기회를 가짐으로써 오류 방지에 도움을 줍니다.
- 데이터 포함 전송 (send(to, amount, data))
  - 일반적인 transfer와 유사하지만, 추가 데이터 필드를 포함할 수 있습니다.
  - 이 데이터는 수신 스마트 콘트랙트에서 특정 함수를 트리거하는 데 사용될 수 있어, 더 풍부한 상호작용이 가능합니다.
 
###  도입의 어려움
	
- ERC-777은 기술적으로 더 우수하지만, 전환 비용(스마트 콘트랙트 교체, 거래소·디앱 업데이트 등)이 높음
- 기존 ERC-20 토큰과의 호환성과 사용자 설득 문제도 있음
-	따라서 아직 대중적으로 채택되지 않음

## ERC-1155

### ERC-1155란?
	
- 게임 아이템과 같은 가상 상품을 효율적으로 관리하기 위해 설계된 멀티 토큰 표준
-	ERC-20(대체 가능) 과 ERC-721(대체 불가능) 의 속성을 모두 혼합한 형태

### 게임에서의 활용 예

- 일반 무기(예: 권총): 대체 가능한 자산 → ERC-20 스타일
-	특별한 무기(예: 로켓 발사기): 고유한 속성의 자산 → ERC-721 스타일
-	ERC-1155는 이러한 두 가지를 하나의 표준으로 통합하여, 같은 스마트 콘트랙트 내에서 함께 다룰 수 있도록 함

### 현황과 한계

-	2020년 기준 약 35개의 게임이 ERC-1155를 채택했고, 10만 명 이상이 관련 아이템을 보유 중
-	하지만 여전히 이더리움 네트워크의 트랜잭션 처리 속도(확장성) 는 대규모 게임 운영에 장애 요소로 남아 있음

# 💡 다중 서명 콘트랙트

### 다중 서명 지갑(Multisig Wallet)이란?

-	일반 지갑은 개인키 1개만으로 자금 이체가 가능해 보안에 취약함.
-	다중 서명 지갑은 여러 명의 서명(개인키)을 요구함으로써 자금 도난 위험을 줄이고 보안성을 높임.
-	은행의 공동 계좌처럼 M개의 서명으로 N개의 승인 주소 중 일부가 트랜잭션을 실행해야 함 (M ≤ N).

### 기본 구성 및 예시

- 예: 5개 주소 중 3개(M=3, N=5) 가 서명해야 트랜잭션 실행 가능
-	실제 소유자 주소 5개는 getOwners 함수로 확인 가능
-	required 변수로 필요 서명 수(예: 3) 확인 가능

### 트랜잭션 실행 과정 (그림 5-3 기반)

![image](https://github.com/user-attachments/assets/b7a8f424-c9cc-4da2-ac44-6134c8eab377)

submitTransaction -> confirmTransaction -> confirmTransaction

### 정리

- 다중 서명 지갑은 여러 명의 서명을 통해 자금 이체를 허용하는 보안 중심의 스마트 콘트랙트로,
- 서명 과정과 트랜잭션 이력은 모두 블록체인에 기록되어 완전한 투명성과 감사 가능성을 제공한다.
- submitTransaction → confirmTransaction x M → 자동 실행 순으로 작동한다.

# 💡 탈중앙화 거래소 콘트랙트

## 중앙집중화 거래소 (CEX)

-	대표 사례: 코인베이스, 비트스탬프, 제미니 등
-	서버와 데이터베이스가 웹 호스팅 서비스(AWS 등) 에 위치
-	거래소가 사용자 자금을 보관, 오더북을 관리하고 거래를 중개함
-	사용자는 거래소에 자금을 예치하고 거래소를 신뢰해야 함

## 탈중앙화 거래소 (DEX)

-	대표 사례: IDEX
-	프론트엔드는 중앙 서버(AWS 등)에 있지만, 백엔드 코드는 스마트 콘트랙트로 블록체인에 배포
-	데이터베이스도 이더리움 블록체인 기반
- 투명하고 감사 가능한 시스템 제공
-	ERC-20 토큰은 허가 없이도 바로 거래 가능

## DEX의 장점
- 투명성
  - 스마트 콘트랙트 코드가 공개되어 있어 누구나 사전에 감사 가능
  - CEX보다 더 높은 신뢰성 제공
- 대응 위험 감소
  - 자금을 거래소에 맡기는 대신 스마트 콘트랙트가 자산 보관
  - 거래소 파산, 해킹 등으로 자금 손실 위험 감소
 
## DEX의 단점

- 속도 지연
  - 거래는 블록에 포함되어야 하며, 평균 10초~1분 소요
  - 시장가 변동에 취약할 수 있음
- 비용 부담
  - 주문 제출/취소 등 모든 행동이 트랜잭션 처리 필요
  - 각 행동마다 가스비(수수료) 발생 → 비용 증가
- 일반 사용자 접근성 낮음
  - 트랜잭션마다 지갑 서명 요구
  - 비기술 사용자에게는 복잡하고 불편하게 느껴질 수 있음
 
  
