# 💡 신탁 재분배

- 은행은 느리고, 비용이 비싸다.
- 암호화폐를 사용하는 결제 계층 은 블록체인으로 중개자 없이 거래할 수 있다.
- 즉, 개인이 돈을 맡기지 않고, 소유할 수 있게 된다.

## 해킹의 정체성과 위험성

- 개인이 돈을 소유하게 됨으로써 좋은 점? 은행이 해킹 등으로 털려서 피해 입는 일을 감수할 필요가 없다.
- 개인정보 유출, 비밀번호 유출 등에서도 비교적 자유롭다. (맡긴 데이터가 탈취 당한다!)
- 블록체인 기술은 개인이 공개키-개인키 쌍으로 자신의 개인정보를 완전히 통제한다.
- But, 맡기는 것보다 보관하는 데에는 불편함이 따른다. (개인키 잃어버리면 어쩌지?)

## 지갑

- Tip) 디파이(DeFi): 탈중앙화 금융(Decentralized Finance)의 약자로서 탈중앙화된 분산금융 또는 분산재정을 의미
- 디파이를 제공하는 지갑 서비스는 현재 많다.
- 대표적으로 메타마스크가 있고, 지갑을 보관해주는 코인베스도 있다.
- 기억할 점: 키를 소유하지 않는 것은 자산을 소유하지 않는 것과 같다.

## 개인키

- 메타마스크와 레저 지갑은 사용자가 개인키를 알고 신중하게 저장해야 한다.
- 패스워드나 니모닉을 잃어버리면 개인키를 잃어버린 것과 같다.

## 네이밍 서비스

- 공개키는 이메일 주소, 사용자 이름 또는 기타 식별자보다 사용하기 어렵다.
- 그래서 키를 QR코드로 이용할 수 있는 서비스도 존재한다.

![image](https://github.com/user-attachments/assets/8aa9ef06-1173-449e-8905-29baf97b2511)

- 네이밍 서비스로 복잡한 공개키보다 훨씬 쉽게 읽고 쓸 수 있는 이름을 가질 수 있다.
- 이더리움 네이밍 서비스는 공개키로 변환되는 〈username〉.eth 명명 규칙을 사용할 수 있도록 한다.

# 💡 탈중앙화 금융

- 탈중앙화 금융에서는 중개인이 없다.
- 디파이 서비스는 스마트 콘트랙트, 암호화폐, 블록체인을 활용해 은행권이 전통적으로 제공해온 일부 서비스를 대체한다.

![image](https://github.com/user-attachments/assets/ba3d84a5-b2d1-4388-94c8-4c76bc0d5fc1)

- 디파이(DeFi)는 주로 이더리움과 ERC-20 토큰을 기반으로 구성되며, ERC-20의 유연성 덕분에 시장 상황에 맞춰 유동성 풀을 조절할 수 있다.

## 중요한 정의

- 스마트 콘트랙트는 디파이 모델에 필수다.
- 디파이 토큰은 시스템 설계에 따라 유통량이 유동적으로 변해 인플레이션이나 디플레이션이 발생할 수 있다.

### 민팅

- 민팅은 암호화폐 공급량을 늘리기 위해 사용되며, 새 자산을 만드는 기능을 포함한다.
- 민팅은 보상을 받으려는 스테이커（초기투자자）나 인센티브용으로 자산을 모으는 사용자（소액투자자）를 위해 새 블록을 생성해 수행된다.
- 반대개념 -> 버닝(소각)
- 스마트 콘트랙트에서는 개발자가 원하는 로직에 따라 민팅(Minting)이나 버닝(Burning)을 자유롭게 구현할 수 있다. (단, 누가 언제 어떻게 민팅/버닝할 수 있는지 코드로 미리 정의해야만 한다.)

### 소각

- 민팅과 반대로 암호화폐 공급량을 줄이기 위해 사용된다.


### 랩드 토큰(Wrapped Token)

- 랩드 토큰은 원래 블록체인에서 사용되는 자산(예: 비트코인)을 이더리움 같은 플랫폼에서 ERC-20 형태로 사용할 수 있게 만든 포장된 버전이다.
- 이더리움은 ERC-20 기반으로 작동하지만, 비트코인은 ERC-20이 아니기 때문에 이더리움 기반 디파이 앱에서는 비트코인을 직접 사용할 수 없다.
- 따라서, ERC-20이 아닌 자산은 스마트 콘트랙트로 통합 거래가 불가능한 문제가 있다.
- 그런 자산을 ERC-20으로 감싸서 이더리움 네트워크에서 쓰게 하자는 개념이 랩드 토큰이다.

![image](https://github.com/user-attachments/assets/d44b68f8-0437-49da-bc09-3496306ec4a5)

### DAO

- 탈중앙화 자치 단체(Decentralized Autonomous Organization)는 주로 이더리움 스마트 콘트랙트를 통해 조직된 프로젝트다.
- 사람이나 회사가 운영하는 게 아니라, 스마트 콘트랙트가 규칙을 정하고, 토큰을 가진 사람들이 투표로 의사결정한다.

### 오라클

- 오라클은 블록체인이 외부 정보를 알게 해주는 중간 다리이다.
- e.g. 비가 오면 자동으로 보상 지급이라는 DeFi 서비스가 있다고 할 때, 오라클이 오늘 비가 온다. 라는 데이터를 주면 스마트 콘트랙트가 자동으로 보상 지급
- 오라클의 피드나 조작이 잘못되면 스마트 콘트랙트가 실행돼 회복할 수 없는 자금 손실이 발생할 수 있다.

![image](https://github.com/user-attachments/assets/3c2778ef-2867-4a74-a391-119bf2cdccb6)

### 스테이블코인

- 미국 달러화 및 기타 피아트 통화에 부합하는 블록체인 기반 자산이다.
- DAI, USDC, TrueUSD(TUSD) 등이 있다.

# 💡 디파이 서비스

## 대출

- 컴파운드 같은 서비스는 사용자가 암호화폐를 담보로 대출할 수 있게 해준다.
- 차입금은 과잉 담보로 DAI에서 발행된다.
- DAI는 달러에 고정돼 있어서 시장에서 피아트에 판매되거나 다른 암호화폐에 투자하는 데 사용될 수 있다.

## 예치

- 디파이 예치는 사용자가 암호화폐（스테이블코인）를 스마트 콘트랙트로 잠그는 방식이다.
- 스마트 콘트랙트에 예치하면 일정 이자를 받을 수 있다.
- 스테이킹이랑 비슷하지만, 스테이킹은 트랜잭션 검증에 참여하고, 예치는 그렇지 않다.

## 파생상품

- 파생상품(합성자산)은 실제로 가지고 있지 않은 자산의 가치를 흉내 낸 토큰이다.
- 디파이에서는 ETH 같은 코인을 담보로 맡기고, 그 담보를 기반으로 BTC, 금, 주식처럼 다른 자산의 가격을 추종하는 토큰을 만들 수 있다.
- ETH를 담보로 스마트 콘트랙트에 맡김 -> 그러면 wBTC (Wrapped BTC) 같은 토큰을 발행 -> 이 토큰은 비트코인 가격과 1:1로 연동돼 움직임 -> 나는 ETH를 가지고 있지만, BTC에 투자하는 것과 동일함

# 💡 탈중앙화 거래소

## 탈중앙화 거래소와 중앙집중화 거래소

- 탈중앙화 거래소의 목표는 교환의 어떤 부분에도 전원을 공급할 수 있는 중앙집중화 권한에 의존하지 않고 사용자에게 100% 기능을 제공하는 것이다.

## 거래소별 기반 인프라

![image](https://github.com/user-attachments/assets/c0879e2b-3680-46d9-b2c9-4392a80e2b4d)

![image](https://github.com/user-attachments/assets/9809c726-d62e-4597-b20b-e66a07db4fe3)

## 토큰상장

- 토큰 발행사들이 거래소에 토큰을 상장하려 할 때 양쪽 당사자가 비즈니스 거래 조건을 협상하려고 시도하는 동안 상장이 길게 지연되기도 한다.
- 또한 토큰 제조사는 거래소의 책임을 줄이기 위해 상장 수수료를 지불하고 법률 문서와 법률 의견을 제공해야 한다.
- 탈중앙화 거래소는 그 누구도 제어하지 않기 때문에 토큰 발행사는 자신의 토큰을 직접 상장시킬 수 있다.
- ERC-20 토큰을 유니스왑에 등록하려면 유니스왑 토큰 팩토리 스마트 콘트랙트(0xc0a47dFe034B400B47bDaD5FecDa262Ide6c4d95)에서 createExchange 메서드를 호출하기만 하면 된다.

## 커스터디 및 거래처 리스크

- 중앙집중화 거래소 사용자는 거래하기 위해 암호화폐를 예치해야 하고, 거래소는 예치 자금을 보관한다. (해킹되면 모두 끝..!)
- 탈중앙화 거래소를 사용하면, 스마트 콘트랙트는 입출금, 거래, 사용자 자금의 보관 및 유지를 관리한다.
- 스마트 콘트랙트에서 주의해야 할 사항은 다음과 같다.
  - 스마트 콘트랙트에서 사용자의 자금을 이동시킬 수 있는 함수는 무엇인가?
  - 사용자의 자금을 이동시키기 위해 누가 이 함수를 호출하는가?
  - 사용자의 자금은 어디로 옮길 수 있는가?
 
## 본인인증

- 모든 중앙집중화 거래소에는 사용자의 개인정보와 같은 식별 정보를 공유해야 하는 등록 프로세스가 있다.
- 본인인증(KYC)은 정부가 거래소와 같은 금융 기관들이 돈세탁과 테러 자금 조달을 용이하게 하는 것을 막기 위한 중요한 방법이다.
- 탈중앙화 거래소를 사용하면 어떤 신원 정보도 공유하지 않고 누구나 거래를 할 수 있다.

## 확장성

- 중앙집중화 거래소(CEX)는 거래를 자체 데이터베이스(DB) 상에서 처리할 수 있기 때문에, 온체인 트랜잭션 없이도 매우 빠르게 체결이 가능하다.
-	반면, 탈중앙화 거래소(DEX)는 모든 거래가 블록체인 상의 스마트 콘트랙트를 통해 이루어지므로, 무조건 온체인 트랜잭션을 수반하며, 블록 생성 주기에 따라 상대적으로 느릴 수밖에 없다.

# 💡 플래시론

- 플래시론은 담보 없이도 아주 큰 금액의 암호화폐를 잠깐 빌릴 수 있는 대출이다.
- 단, 같은 트랜잭션 안에서 반드시 빌린 금액 + 수수료를 모두 갚아야 한다.

![image](https://github.com/user-attachments/assets/da337fd4-22eb-4352-b3cc-9091886d68c2)

![image](https://github.com/user-attachments/assets/8aa455d5-3725-4fc0-ad04-06f32be11735)

# 💡 프라이버시

- 비트코인이나 이더리움 같은 퍼블릭 블록체인은 개인정보 보호 측면에서는 탁월하지 않다.
- 비트코인과 이더리움의 모든 트랜잭션 정보는 공개 블록체인에서 볼 수 있는데, 여기에는 발신자와 수신자의 거래량과 주소가 포함된다.
- 프라이버시를 충족시키기 위해 제트캐시 및 모네로와 같은 프라이버시 중심의 블록체인이 출시됐다.

## 영 지식 증명

- 영지식 증명(Zero-Knowledge Proof)은 증명자(Prover)가 검증자(Verifier)에게 진술이 참이라는 것을 증명하는 암호화 방법 또는 프로토콜이다.
- 예를 들어, 내가 비밀번호(또는 어떤 정보)를 알고 있다는 걸 증명하되, 그 비밀번호는 알려주지 않는 기술이다.

![image](https://github.com/user-attachments/assets/858283ef-6301-4688-9b4d-1156e9c19291)

## 제트캐시

- 제트캐시는 거래 정보를 공개 또는 비공개로 만들 수 있는 옵션을 제공하는 개인정보 중심의 블록체인이다.
- 비트코인이나 이더리움 같은 퍼블릭 블록체인에서 프라이빗 트랜잭션을 허용
- 퍼블릭 블록체인의 스마트 콘트랙트 코드 비공개 실행 허용

## 링서명

- 링 서명(Ring Signatures)을 시용하면 미리 정의된 그룹의 누구나 트랜잭션에 서명할 수 있으므로 실제 서명자의 신원을 파악하는 데 어려움이 있다.
- 그룹 구성원 중 한 명이 트랜잭션을 전송해 발신인을 숨기고 개인정보를 보호할 수 있다.
