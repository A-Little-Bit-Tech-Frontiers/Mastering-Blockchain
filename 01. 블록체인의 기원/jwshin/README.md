# 💡 전자시스템과 신뢰

- 인터넷의 발전으로 돈의 관리가 디지털화 되었지만, 신뢰의 문제가 여전히 남아있었다.
- 돈을 관리하는 주체는 여전히 제3자였으며, 금융거래는 중개자, 신탁발행자에 대한 신뢰로 이루어지고 있었다.
- 하지만 '신뢰'가 금융에서 항상 신뢰할 수 있던 것은 아니다. e.g. 2008년 금융위기
- 사람들은 이때부터 중앙집중된 신뢰가 생각과는 다르다고 생각하게 된다. -> 비트코인의 등장배경

# 💡 분산화 VS 중앙집중화 VS 탈중앙화

- 인터넷은 분산 기술로 설계됐지만 중앙 집중화 애플리케이션과 분산화 애플리케이션이 혼합된 형태다.
- 분산은 어떤 단일 장애 지점도 전체 시스템을 무너뜨릴 수 없다는 것을 의미한다. (중앙집중과 대비된다. -> 돈에 대한 신뢰도 분산되어야 한다.)
- 블록체인 기술의 분산특성은 개별 사용자에게 더 많은 통제권을 줌으로써 소수의 대기업에 의한 웹의 지배력을 완화하는 데 도움이 될 수 있게 하는 것이다.
- 완전히 탈중앙화된 시스템에서는 특정 노드가 자신의 목표를 달성하기 위해 반드시 모든 다른 노드와 협력할 필요는 없으며, 결정은 합의를 통해 이뤄지며 단일한 개체에 책임을 맡기지 않는다.❓

![image](https://github.com/user-attachments/assets/60d919aa-1191-4484-a828-82b095cf0767)

# 💡 비트코인 이전 모델들

- 비트코인이 출시되기 전인 2009년 이전까지만 해도 사용자의 화폐 통제는 아날로그（현금 또는 수표）에서 디지털（인터넷뱅킹 등 전자금융）로 전환한 것 외에는 큰 변화가 없었다.
- 변화 때문에 디지털 화폐의 개념은 익숙한 개념이었지만, 여전히 중앙집중식이었다.
- 이들의 목표는 재정권리를 증가시키거나, 사용자（서비스 사용자의 돈에 관한 더 나은 통제를 하고자 함이다.
- 이들 모두 비트코인 (블록체인)의 모토가 되었다.

## 디지캐시

- 익명 디지털 결제를 가능하게 하는 회사
- 암호화 및 자체 통화를 제공
- 사용자는 토큰 또는 코인이라고 불리는 사이버벅스를 받았다. (100달러)

## E골드

- 중앙집중형 시스템인 E골드는 어떤 개인의 신원과 계정을 연결하는 메커니즘이 없었다. -> 주인 또는 출처를 모르는 돈이다.
- 플랫폼을 통해 악의적인 목적으로 사용돼 돈세탁, 온라인 사기 및 기타 불법 활동이 쉬워졌다.

## 해시캐시

- 디지털 자금의 타당성을 확인하기 위해 작업 증명이라는 방식을 도입했다.
- 작업 증명은 컴퓨터가 전자화폐가 어떤 가치를 가지려면 일종의 검증 가능하고 계산 집약적인 출력을 생성해야 한다는 것을 의미한다.
- 해시 알고리즘, SHA1
- 디지털 화폐에서 해시를 사용하는 개념은 이중지출 문제를 해결할 수 있다.
- 이중지출 문제는 디지털 단위를 파일처럼 복사해 두 번 이상 지출되는 결함을 의미한다.
- 해시캐시에서 해시의 사용은 작업 증명이나 컴퓨팅 파워를 사용해 디지털머니로 비용을 부과해 이중지출의 가능성을 제한하기 위한 것이다. ❓

## 비머니

- 비머니는 디지털 머니가 계산 또는 작업 증명서를 통해 생산될 수 있다고 제안했다.
- 또한, 비머니는 거래 내용을 네트워크 전체로 전파하는 아이디어로 발전시켰다.
- 예를 들어, 한 당사자가 다른 당사자에게 돈을 지불하기를 원하면 “사람 A가 사람 B에게 X원를 보낼것입니다” 라는 메시지가 네트워크에 전송된다. -> 이 내용을 네트워크의 누군가가 알고 있어야 진정한 거래로 인정하는것인지? 이것이 합의 개념? ❓

## 비트골드

- 비트골드의 아이디어는 귀금속의 희소성을 디지털 영역으로 가져오는 것이었다.
- 귀금속은 위변조가 불가하거나 고정비용으로 인해 위조가 어렵다는 데에 주목한다.
- 그래서 금의 가치를 받아들여 디지털로 만든다.
- 작업 증명 중 '클라이언트 퍼즐 함수' 유형을 활용했다.
  - 분산된 방식으로 안전하게 타임스탬프를 표시하는 방법이다. 그 후 디지털 방식으로 소유권 증명을 제공하기 위해 분산 소유권 등기처에 제출한다.

# 💡 비트코인 실험

## 2008년 금융위기

- 금융위기로 인해 금융시스템의 투명성에 의문이 생겼다. -> 중앙집중화의 문제 대두
- 비트코인의 기초가 되는 많은 개념과 기술이 2008년에 이미 존재했지만, 아무도 디지털 신뢰와 투명성을 가능하게 하는 시스템을 만들기 위해 이전의 전자화폐 개념의 모든 조각들을 합친 적이 없었다.

## 백서

- 2008년 이전에 등장한 모든 개념을 합쳐서 디지털 신뢰와 투명성을 보장하는 시스템을 만들 수 있을까? -> 비트코인의 등장
- 2008년 8월 18일, bitcoin.org 도메인이 등록됐다. 이후 사토시 나카모토라는 가명을 쓴 개인 또는 그룹이 2008년 10월 31일에 백서를 작성한다.
- 「비트코인 : 피어 투 피어 전자 현금 시스템」 이라는 제목의 논문은 인터넷에만 존재하는 가치 시스템을 만들기 위한 구체적인 방안을 제시했다.
- 은행이나 중앙 정부와 아무런 연결 없이 운영될 수 있는 디지털 화폐를 만들고, 금융위기와 같은 사건이 다시는 일어나지 않도록 보다 투명한 금융 시스템을 구축하는 것이 백서의 목표였다.
- 비트코인 제안은 이전 시스템에서 가져온 다음과 같은 아이디어를 특징으로 삼았다.
  - 닉 재보가 설명한 스마트 콘트랙트와 같은 안전한 디지털 거래
  - 디지캐시와 같은 거래를 확보하기 위해 암호를 사용
  - E골드처럼 적은 양의 안전한 기치를 보낼 수 있는 이론적인 능력
  - 비머니가 제안한 것과 같이 정부 시스템 밖에서 돈을 창출
  - 해시캐시가 설계한 것과 같이 디지털 자금의 유효성을 검증하기 위해 작업 증명 사용
- 백서는 또한 다음 내용을 포함해 많은 사람들에게 생소한 몇 가지 개념을 소개했다.
  - 이중 지출(Double spending) : 위조된 복제를 통해 통화 단위가 두 번 이상 지출될 위험
  - 작업 증명(Proof of Work) : 계산 능력으로 해결해야 하는 수학적 문제
  - 해시(Hash) : 다양한 크기와 시퀀스 데이터를 구성할 수 있도록 고정된 길이의 출력이 생성
  - 논스(Nonce) : 특정 통신을 한 번만 사용할 수 있는 난수
- 비트코인 백서는 디지털 전용 네트워크에 모든 거래를 게시함으로써 조폐국 기반의 중앙 권한을 제거할 것을 제안했다.
  - "신뢰할 수 있는 당사자 없이 이를 달성하려면 거래를 공개적으로 발표해야 하며, 참가자들이 자신이 받은 순서에 대한 단일 이력을 합의할 수 있는 시스템이 필요하다. 수취인은 각 거래의 시점에 노드 대다수가 최초 수취인이라는 데 동의했다는 증거가 필요하다."
 
# 💡 타임스탬프 서버 소개

- 사토시는 비트코인 네트워크를 보호하기 위해 작업 증명서를 사용하는 것 외에도 파일시스템 및 데이터베이스와 유사한 트랜잭션을 검증하기 위해 타임스탬프 시스템을 사용할 것을 제안했다.
- 트랜잭션 중에 생성된 정보를 해시 알고리듬을 사용해 실행하면 해시라고 알려진 고정된 숫자와 문자의 문자열이 생성된다. 사토시는 비트코인에 암호학에서 인기 있는 해시 알고리듬인 SHA-256을 사용할 것을 제안했다.
- 비트코인 백서는 연쇄 서명 즉, 해시로 거래를 추적하는 개념을 소개한다. 블록들이 연결돼 시간 순으로 구성된 구조다.

![image](https://github.com/user-attachments/assets/1171d0d5-f68c-47fa-b7a9-b33cc5936693)

### 다음은 모든 비트코인 블록의 중요한 속성이다.

## Block hash

- 블록 해시는 블록체인의 현재 상태를 대표하는 고유한 식별자다.
- 특정 블록이 어떤 데이터를 포함하고 있는지 요약하는 디지털 지문이라고 생각하면 된다.
-	블록 안에는 여러 가지 정보가 포함되어 있다.
  -	블록 번호 (몇 번째 블록인지)
	-	이전 블록의 해시 (이전 블록과 연결됨)
	-	거래 데이터 (비트코인 전송 기록 등)
	-	생성 시간 (타임스탬프)
	-	작업 증명 (채굴 난이도 관련 정보)
- 이 모든 정보를 SHA-256 해시 알고리즘을 사용해 하나의 고유한 값(해시)로 변환한다.
	-	예를 들어, SHA-256("블록 데이터") = 6f8a...9e3b
	-	이렇게 하면 어떤 블록이든 하나의 고유한 해시 값을 가지게 되고, 이를 블록 해시라고 한다.
- 블록체인은 이전 블록의 해시를 포함하면서 연결된다.
	-	A 블록의 해시는 B 블록에 포함된다.
	-	B 블록의 해시는 C 블록에 포함된다.
	-	이런 식으로 블록들이 계속 연결되기 때문에 데이터 위조가 어렵다.
- 블록의 정보를 해시로 저장하면 얻는 장점
  - 데이터 위변조 방지: 블록의 내용이 조금이라도 변경되면 해시 값이 완전히 달라져서 조작이 금방 들통난다.
  - 블록체인 연결 역할: 이전 블록의 해시를 포함하고 있어서, 블록들이 끊기지 않고 안전하게 연결된다.
  - 빠른 검증 가능: 전체 데이터를 비교하지 않고 해시 값만 비교하면 되기 때문에, 무결성 검증이 쉽다.
 
## Coinbase transaction

- 네트워크에서 채굴된 새로운 블록의 첫 번째 트랜잭션이다.
- Coinbase transaction은 블록 공급에 의해 새로운 비트코인을 추가하는데, 체인에 블록을 추가하는 마이너Miner에게 보상으로 주며 블록을 공급해주는 방식이다. -> 채굴이라고 한다.

## 	블록 높이 번호 (Block Height Number)

- 현재 블록과 체인의 첫 번째 블록(제네시스 블록) 사이에 얼마나 많은 블록이 있는지를 식별한다.
- 블록 높이( Block Height)는 블록체인에서 특정 블록이 몇 번째 블록인지 나타내는 숫자이다.
- 블록체인은 체인 형태로 연결된 블록들이기 때문에, 특정 블록을 식별할 때 “해시값” 대신 “블록 높이”로 찾을 수 있다.
	-	예: “블록 높이 800,000에서 어떤 거래가 있었지?”

## 머클루트（Merkle root）

- 블록체인의 유효성을 증명할 수 있는 해시 값이다. (2장에서 다룬다.)

![image](https://github.com/user-attachments/assets/69dcf35d-0fc1-4f4d-ba75-e0df6b4a3936)

![image](https://github.com/user-attachments/assets/d7c96ed5-ca36-4f4d-bbcb-b3cafb0a551c)

# 💡 합의를 이루다

- 비트코인은 분산된 네트워크로, 사람들이 시스템에서 마이너 역할을 하기 위해 필요했다는 것을 의미한다.
- "들어오는 연결을 받아들이는 노드를 계속 실행할 수 있다면 네트워크에 정말 많은 도움이될 것"
- 블록체인은 살아있고 끊임없이 업데이트되는 문서다. 시간이 지날수록 여기에 더 많은 트랜잭션이 추가된다.
- 페이팔과 같은 중앙 결제 네트워크의 사용자들은 중앙 당국이 시간이 지나면서 새로운 거래로 원장을 업데이트할 것이라고 믿는다. 그러나 비트코인과 같은 탈중앙화 결제 네트워크에는 중앙 권한이 없다. 단지 수천 명의 익명의 마이너들이 네트워크에 힘을 실어주고 있을 뿐이다. -> 탈중앙화
- 그렇다면 사용자들은 비트코인의 블록체인을 새로운 거래 블록으로 업데이트하기 위해 누구를 신뢰해야 하는가?

### 블록 발견

- 트랜잭션 블록을 추가할 수 있는 권한을 갖는 마이너를 합의한다.

### 트랜잭션의 유효성

- 새 블록에 포함된 트랜잭션이 합법적이라는 데 동의한다.


 
- 암호화에 사용되는 대부분의 블록체인은 합의를 달성하기 위한 두 가지 접근법 중 하나를 따른다.
  - Proof-of-work : 작업 증명
  - Proof-of-stake : 지분 증명

## 공개키 암호학과 개인키 암호학

- 비트코인은 공개키 암호화와 개인키 암호화를 이용해 거래의 타당성을 증명한다.
- 개인키: 비트코인 거래에 디지털로 서명하는 데 쓰임. 주소의 정당한 소유자임을 증명한다.
- 공개키: 비트코인 주소를 생성하는 데만 사용된다.

## 키 생성

- 개인키는 무작위로 선택된 256비트 숫자다.
- 개인키는 거의 항상 16진수 형식으로 표시돼 있다. 개인키는 컴퓨터에 의해 생성된다.
- 개인키는 공개키와 페어링돼 비트코인 네트워크에서 거래할수 있다. 개인키가 없으면 설계상 거래를 할 수 없다.

![image](https://github.com/user-attachments/assets/5c0e946b-bee5-4fcd-b82c-4976c6929d7f)

## 트랜잭션 생성

- 비트코인 거래는 UTXO라고 하는 독특한 유형의 회계를 따르는데, UTXO는 사용되지 않은 거래 산출물을 의미한다. (Unspent Transaction Output)
- 간단히 말하자면, 비트코인 네트워크에서 사용되지 않은 비트코인 잔액을 관리하는 방법이다.
