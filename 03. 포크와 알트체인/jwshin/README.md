# 💡 비트코인 개선안

- 비트코인 개선 사항의 약자는 BIP (Bitcoin lmprovement Proposals)
- 비트코인 개선은 지정된 위원회나 팀에 의해 결정되는 것이 아니라, 전체 공동체에 의해 이뤄진다.
- BIP는 누구나 제안할 수 있고, 커뮤니티에서 아이디어를 동의해야 채택된다.

### BIP 충족 조건 3가지

- 이 절차는 프로세스를 요약한 초기 제안서에 명시된 올바른 형식인 BIP-0001 (모든 BIP가 따라야 할 작성 형식/절차 표준)을 따른다.
- 변경사항을 구현하는 코드가 제안서에 들어있다.
- 지금까지 발견된 2,016개의 블록 중 95%는 마이너들이 새로운 BIP를 사용해 만든 것이다.

![image](https://github.com/user-attachments/assets/5d13c71d-7c26-42ba-960f-39a3198ea82e)

# 💡 포크에 관한 이해

- 소프트웨어 포크를 통해 개량한 비트코인을 만들 수 있다.

![image](https://github.com/user-attachments/assets/038f41d1-b2c6-48ae-a636-35703a703317)

# 💡 논쟁을 불러온 하드포크

- 논쟁의 여지가 있는 하드포크가 발생하면 암호화폐의 메인 블록체인이 두 개의 분리된 블록체인으로 쪼개진다.
- 포크가 발생하는 순간까지 두 블록체인은 동일한 기록을 가지고 있다.
- 포크 이후에는 각 블록체인이 자체적인 새로운 블록과 새로운 트랜잭션 기록을 만들고, 블록은 서로 다른 마이너가 채굴할 수 있다.

### 예시

- 비트코인 네트워크가 정상적으로 운영 중인 상황
- 어떤 개발자들이 “블록 크기를 1MB → 8MB로 늘리자“고 제안
-	일부 마이너들은 동의하고, 일부는 “NO” 반대
-	서로 다른 버전의 소프트웨어를 실행하게 된다.
- 그 결과, 블록체인이 둘로 쪼개짐
- e.g. 블록체인 & 블론체인캐시

![image](https://github.com/user-attachments/assets/6c27d0c4-9adc-44ab-91a6-b104c6027135)

# 💡 마이너

- 마이너는 네트워크 실행을 위해 해시파워를 기여하는 사람들이다.
- 하드포크가 발생한 순간, 비트코인캐시(BCH)를 지지하는 마이너들은 Bitcoin ABC v0.14.6으로 소프트웨어 변경
- 기존 비트코인(BTC)을 지지하는 마이너들은 Bitcoin Core v0.14.2 유지
- 포크 후 약 2016개 블록(약 2주) 동안 더 많은 해시레이트를 확보한 체인이 주류 블록체인으로 간주됨 (-> 당연히 블록체인이 주류 블록체인 -> 노드가 많다 -> 해시파워가 높다 -> 더 탈중화 됐다 -> 신뢰도 높다)

# 💡 리플레이 공격

- 하드포크가 발생하면 두 개의 새로운 블록체인이 모두 리플레이 공격에 취약해질 수 있다.

###  리플레이 공격(Replay Attack)이란?

- 하나의 블록체인에서 발생한 정상 거래 데이터를 다른 포크된 블록체인에 그대로 복제해서 사용해버리는 공격 방식

### 리플레이 공격 발생 조건

- 하드포크 후 두 체인이 트랜잭션 구조와 서명 방식이 동일할 경우
-	A 체인에서 발생한 거래가 B 체인에서도 유효하게 처리될 수 있음

### 공격 시나리오

1. 주소 A에서 주소 B로 60 BTC 전송 -> 트랜잭션 서명과 데이터가 비트코인 네트워크에 브로드캐스트됨
2. 공개된 서명을 공격자가 복사 -> 비트코인캐시(BCH) 네트워크에도 동일한 거래를 브로드캐스트
3. 비트코인과 비트코인캐시가 서명 구조가 같다면 거래가 복제됨

### 비트코인캐시의 방어 방법

- 비트코인 캐시는 하드포크 시, 트랜잭션 구조에 SIGHASH_FORKID 필드를 추가함 (서명 방식이 달라진다!)
-	이 필드가 있는 트랜잭션만 비트코인 캐시에서 유효함
-	서명에 포함되는 데이터도 달라져서, BTC 체인에서 생성된 서명은 BCH에서 유효하지 않음 (그리고 반대도 마찬가지)

# 💡 비트코인캐시 포크

-	2015년 전후, 비트코인의 확장성 문제(특히 블록 크기 제한 1MB)를 두고 커뮤니티 내부 갈등 발생
-	한쪽은 원래 사토시 백서대로 “피어 투 피어 전자화폐” 역할을 강조하며 블록 크기 확대를 주장
-	다른 쪽은 세그윗(SegWit), 라이트닝 네트워크 같은 블록 외 솔루션을 통해 문제를 해결하자고 주장
-	블록 크기 문제로 합의 실패 -> 비트메인, ViaBTC 등 마이너와 개발자 일부가 하드포크 단행
-	2017년 8월 1일, 블록 크기를 8MB로 확장한 비트코인캐시(BCH) 출범
-	거래 수수료 down / 처리속도 up -> 실생활 결제 수단으로 사용하자는 목적
-	BCH는 비트코인의 가장 성공적인 하드포크 사례로 자리 잡음
-	하지만 기대만큼 대중화되진 못했으며, BTC만큼의 신뢰도는 얻지 못함

# 💡 알트코인

- 알트코인은 보통 비트코인 코어 소프트웨어를 포크(복제/수정)한 코인들을 의미함
-	쉽게 말해, "비트코인을 기반으로 만들어진 다른 암호화폐들"
-	비트코인의 철학이나 기능을 바꾸고 싶은 사람들이 참여
-	채굴 방식, 발행량, 트랜잭션 속도, 개인정보 보호 기능 등을 개선하거나 실험
-	아이엑스코인, 솔리드코인, 제이스트겔드, 네임코인, 프라임코인 등등의 알트코인들이 등장했다.

# 💡 개인정보 보호에 중점을 둔 암호화폐

- 블록체인에 모든 거래 기록이 영구히 공개되다 보니, 거래자의 프라이버시 보호 필요성이 제기됨
- 그 결과, 프라이버시를 강화한 암호화폐들이 등장

### 대시 (Dash)

- 2014년, 비트코인 포크
- 원래 이름은 다크코인 (익명성 강조 -> 부정적 인식)
-	PrivateSend: 사용자 트랜잭션을 섞어서(믹싱) 추적 불가능하게 만듦
- ASIC 저항 작업증명도 도입 (X11 알고리즘)

### 모네로 (Monero)

- 2014년, CryptoNote 기반
- 링 서명(Ring Signature)으로 보내는 사람을 숨김
-	스텔스 주소로 받는 사람도 익명화
-	링 기밀 거래로 금액까지 숨김 -> 완전한 익명성

### 지캐시 (Zcash)

- 2016년
- zk-SNARKs (영 지식 증명) 사용 -> 실제 정보 없이 거래 유효성만 증명
-	비트코인과 동일한 공급량 (2100만 개)
-	투명 거래 vs 보호 거래(z-addr) 구분 -> 실제 사용자는 보호 기능을 잘 안 씀 (3.5%만 보호됨)

# 💡 리플과 스텔라

- 작업증명(PoW)이 가진 에너지 소비, 중앙화 문제에 대한 대안 (모든 비트코인 채굴의 65% 이상이 중국에서 이뤄진다.)
- 리플과 스텔라는 작업 증명 방식을 사용하지 않는 암호화폐 ->	합의 알고리즘 중심의 암호화폐로 출발

### 리플 (Ripple/XRP)

- 2012년, 은행 중심의 송금 시스템 목표
- 합의 방식: 새로운 유형의 XRP 합의 프로토콜 (BFT 기반, 빠름)
- 제드 맥칼렙, 크리스 라슨이 공동 개발
-	중앙 집중 게이트웨이 구조 -> 은행 간 빠른 송금에 유리
-	글로벌 은행, 머니그램 등과 파트너십

### 스텔라 (Stellar/XLM)

- 2014년, 제드 맥칼렙이 리플에서 나와 설립
-	초기 합의 방식: 리플과 유사
-	현 방식: SCP(Stellar Consensus Protocol)
-	목표: 저비용 글로벌 지불 시스템, 특히 금융 소외 계층 대상

# 💡 블록체인 확장

## 확장성이란?

- 블록체인이 거래량이 많아져도 효율을 유지할 수 있는 능력
-	비트코인은 초당 3~7건 처리 -> Visa(6.5만건)에 비해 매우 느림
-	중앙집중형 시스템(Visa)은 리소스를 조정하면 되지만 비트코인은 탈중앙화로 확장에 제약이 큼

## 확장성 문제 대응 방법

### 세그윗(SegWit, Segregated Witness)

- 온체인(체인 내) 확장
- 트랜잭션에서 서명 데이터를 분리해서 블록 공간을 더 효율적으로 사용하는 방식
- 비트코인 트랜잭션은 보통 입력(input) + 출력(output) + 서명(signature)으로 구성됨
-	이 중 서명 데이터는 전체 크기의 약 60%를 차지
-	세그윗은 이 서명 데이터를 블록 본문에서 분리 -> 별도 영역(Witness field)에 저장
-	2017년 8월 비트코인 소프트포크로 도입 결과, 트랜잭션 처리량 증가, 트랜잭션 위·변조(가변성) 문제 해결

![image](https://github.com/user-attachments/assets/ff151984-e32a-4277-865f-8eb0c059259c)

### 라이트닝 네트워크 (Lightning Network)

- 오프체인(체인 밖) 확장
- 비트코인 블록체인 바깥에서 다수의 거래를 수행하고, 그 결과만 블록체인에 기록하는 오프체인 솔루션
- 2016년 제안, 세그윗을 기반으로 작동
- 사용자끼리 결제 채널을 열고, 채널 안에서 무제한으로 송금하는데, 이 과정에서는 수수료가 발생하지 않고 매우 빠르게 처리된다. 이후 그 결과만 블록체인에 기록한다.
-	수수료 낮고 빠름, 특히 소액결제에 적합
-	채널 유지 노드 필요
-	DDoS 및 부정행위 감시 필요

### 상태 채널 (State Channels)

- 블록체인 밖에서 다수 거래 후 한 번에 정산 (예: 라이트닝, 라이덴)
-	별도 블록체인 X

### 사이드체인 (Side Chains)
-	메인체인과 연결된 별도 블록체인 사용
-	예: 플라즈마(Plasma)

### 롤업(Rollups)
-	수천 건의 트랜잭션을 하나로 ‘압축’해서 블록에 기록
-	ZK 롤업: 빠르고 보안 강함 (TPS 약 2000)
-	옵티미스틱 롤업: 느리지만 구현 쉬움 (TPS 약 500)

### 샤딩(Sharding)

- 네트워크를 여러 샤드(조각)로 나눠 병렬 처리
-	처리량 up, 속도 up
-	단점: 보안 분산, 샤드 간 통신 복잡
-	이더리움 등에서 도입 시도 중

# 💡 이더리움 클래식 포크

- 2016년 DAO 해킹 사건으로 약 5천만 달러의 이더리움 탈취
- 이를 계기로 이더리움 커뮤니티가 둘로 분열됨
  - 해킹 피해를 되돌리기 위해 하드포크 필요 (이더리움, ETH)
  - 트랜잭션은 되돌릴 수 없으며, 코드는 법이다 (이더리움 클래식, ETC)

### 포크 진행

- #1920000 블록에서 하드포크 발생
- 대부분의 마이너가 새 코드(ETH)로 이동했고
- 일부 마이너는 기존 체인을 유지 -> 이더리움 클래식(ETC) 탄생

### 리플레이 공격 문제

- 두 체인의 트랜잭션 구조가 동일해서 한 체인에서 발생한 트랜잭션을 다른 체인에서도 재사용(Replay) 가능
-	문제: 초기 포크 당시 ETH 쪽에 리플레이 보호 기능이 없었음
- 약 5개월간 두 체인은 리플레이 공격에 취약

### 해결 방법

-	지갑 사용자들은 수동으로 리플레이 보호
	-	자금을 각각 다른 주소(B, C)로 분산해서 전송
	-	이렇게 하면 체인마다 잔고가 달라져 공격 방지 가능
	-	거래소 등 전문 기관은 자체적으로 보호 가능했지만, 일부 개인 사용자들은 손해를 입음
-	2016년 11월, 이더리움이 EIP-155를 통해 리플레이 보호를 공식 도입
-	트랜잭션에 체인 ID 필드를 넣어 다른 체인에서는 무효하게 만듦

![image](https://github.com/user-attachments/assets/6c30479e-ca1e-48c3-b62a-bf215041d6b5)
