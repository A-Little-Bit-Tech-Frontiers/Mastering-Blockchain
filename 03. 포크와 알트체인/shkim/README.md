# 포크와 알트체인

확장성, 기능성, 투기성 등의 이유로 비트코인 코드를 분기해 비슷한 특성이 있는 새로운 암호화폐를 만들기 위한 제안이 있었다.

## 비트코인 개선안

비트코인 코어는 오픈소스이지만, 비트코인 프로토콜을 업데이트하려면 반드시 따라야 할 거버넌스 프로세스가 있다. <br>
비트코인을 개선하기 위한 아이디어가 생기면 커뮤니티의 누구나 새로운 BIP(비트코인 개선 사항)를 제안할 수 있다. <br>
BIP를 제안하면 제안한 커뮤니티에서 아이디어를 동의해야 채택된다. BIP의 수명주기는 다음과 같다.

1. 커뮤니티의 누군가가 개선 아이디어를 제시하고 BIP 편집자에게 제안한다.
2. 편집자가 승인하면 초안 상태에 넣기 위해 새로운 BIP를 만든다.
3. 마이너들이 BIP에 관한 지지 신호를 보내면 최종 상태로 이동한다.
4. BIP가 최종 상태에 있다면 나머지 커뮤니티는 새로운 소프트웨어로 업그레이드해야 한다.

## 포크에 관한 이해

많은 프로그래머들이 소프트웨어 포크를 통해 개량한 비트코인을 만들 수 있게 됐다. <br>
그 결과로 알트코인이라고 하는 대체 코인들이 탄생했고, 일부는 비트코인과 너무 달라 알트체인이라고 한다.

- 소프트웨어 포크
  - 개발자가 오픈소스 소프트웨어의 일부를 가져다가 일부 매개변수를 변경하는 것을 말한다.
- 소프트포크
  - 블로체인 기술과 관련해 네트워크를 변경하지만 모든 채굴자가 참여할 필요는 없는 채굴 소프트웨어의 업그레이드다. 이전 소포트웨어와 호환되며 보통 트랜잭션 기능을 업그레이드하기 위해 수행된다.
- 하드포크
  - 채굴 소프트웨어를 업그레이드해 네트워크를 바꾸는 것으로 모든 채굴자가 참여해야 한다. 일반적으로 주요 보안 또는 기능 변경을 구현하며, 이전 소프트웨어와 호환되지 않는다.
- 논쟁의 여지가 있는 하드포크
  - 마이닝 소프트웨어에 대한 하위 호환성이 없는 업그레이드로서, 포크를 모두가 동의하지 않을 경우 네트워크에 변화를 준다. <br>
    일부 마이너들이 포크에 동의하지 않아 제안된 변경사항이 포함된 새로운 소프트웨어 버전으로 업그레이드하지 못해, 블록체인은 둘로 갈라진다.

### 논쟁을 불러온 하드포크

![Image](https://github.com/user-attachments/assets/42455c66-8b23-4454-be89-71237a1713ff)

2017년 비트코인에서 분리된 체인 비트코인캐시가 이런 일을 겪었다. <br>
각 블록체인은 포크 이전의 거래, 각 주소의 잔액, 블록의 해시 등의 기록을 포함한다.

### 마이너

마이너는 네트워크 실행을 위해 해시파워를 기여하는 사람들이다. <br>
논쟁의 여지가 있는 하드포크가 발생하면 마이너는 프리포크된 블록체인이 사용하는 소프트웨어를 그대로 유지하거나 <br>
포크된 블록체인이 사용하는 소프트웨어로 변경해 어떤 블록체인을 지원할지 결정한다.

### 리플레이 공격

리플레이 공격은 공격자가 한 블록체인에서 합법적인 거래의 데이터를 가져다가 두 번째 블록체인에서 해당 거래를 복제하거나 미러링할 때 발생한다. <br>
두 블록체인이 모두 트랜잭션 서명을 생성하는 프로세스가 정확히 같을 경우 리플레이 공격에 취약하다.

1. 주소 A는 주소 B로 60 BTC를 보내라는 거래 지시를 비트코인 네트워크에 브로드캐스트한다.
2. 브로드캐스트에는 트랜잭션 데이터와 서명이 포함된다. 트랜잭션 서명은 주소 A가 개인키를 사용해 생성할 수 있으며, 네트워크에 비트코인 네트워크에서 트랜잭션을 서명했음을 증명한다.
3. 주소 A가 거래 데이터와 서명을 공개적으로 브로드캐스트했기 때문에, 누구나 같은 정보를 비트코인캐시 네트워크로 브로드캐스트할 수 있고, 두 체인이 유사하기 때문에 네트워크가 이를 처리할 것이다.

다행히 비트코인캐시 포크가 발생했을 때 새로운 소프트웨어 비트코인캐시 마이너는 어느 블록체인에서든 리플레이 공격이 일어나지 않도록 변경사항을 포함하고 있었다.

## 비트코인캐시 포크

비트코인 커뮤니티에서는 네트워크의 확장 방식, 특히 블록 크기 문제에 불만이 있는 그룹이 존재했다. <br>
비트코인의 블록 크기는 1MB로 블록 안 트랜잭션 수가 제한돼 있었으며, 한 그룹은 개별 블록의 크기를 늘리는 것이 가장 쉬운 길이라고 주장했다. <br>
더 큰 블록이 용이하게 할 빠르고 저렴한 거래를 보기를 원했다. <br>
세그윗과 라이트닝을 구현한 다른 그룹은 블록 크기를 늘리면 전체 블록체인이 너무 커지고, 네트워크 속도가 느려져 개인이 비트코인 코어 소프트웨어를 구동하기에는 너무 힘들다고 봤다.

양측이 비트코인 확장에 합의에 이르지 못하자, 쟁점이 된 하드포크가 마련됐다. <br>
2017년 8월 1일 논란이 많은 하드포크가 발생하면서 비트코인 캐시가 만들어졌다. <br>
새로운 블록체인은 블록 크기가 8MB로 각 블록에 비트코인이 제공하는 트랜잭션 저장량의 8배에 달하는 용량을 부여했다. <br>
2018년 5월 32MB로 늘어난 비트코인캐시의 블록 크기는 더 많은 트랜잭션과 기능을 수용할 수 있도록 설계됐다.

## 알트코인

대표적인 초기 알트코인은 다음과 같다.

- 아이엑스코인
- 솔리드코인
- 제이스트겔드
- 네임코인
- 프라임코인

### 라이트코인

알트코인들은 프리마인도 이슈였다. 미리 채굴된 프로젝트의 개발자들이 익명으로 남아 있다면, 미리 채굴한 익명의 설립자가 <br>
자금을 들고 언제든지 쉽게 떠날 수 있기 때문에 프로젝트가 장기적으로 생존하기 어렵다고 생각했다. <br>
구글의 개발 부서 직원인 찰리는 비트코인을 보완한 코인을 만들고자 헀다. 또한 블록 타임이 더 빠를 수 있도록 프로젝트를 가볍게 만들고자 했다. <br>
결국 비트코인 공급량의 4배를 라이트코인에 주기로 결정했다. 여기에 블록타임이 비트코인의 4배 이상으로 설정됐다. <br>
프리마인은 하지 않기로 결정했고, 취미로 채굴을 하는 마이너를 대상으로 결정했다.

## 2.0 체인

비트코인 포크 외에 처음부터 구축한 프로젝트도 있다.

### 넥스트

넥스트는 암호화폐와 원장을 갖고 있는 대신 시스템 위에 애플리케이션을 구축할 수 있는 플랫폼을 제공하는 것을 목표로 했다. <br>
자산, 주식, 채권 또는 상품과 같은 실제 자산을 나타내기 위해 암호화폐를 태그 또는 색칠하는 컬러 코인의 아이디어를 처음 소개한 프로젝트였다.

### 카운터파티

프로그래머들이 자체 암호 기반 블록 체인 자산을 만들 수 있도록 했다. <br>
블록체인 애플리케이션에 비즈니스 논리를 제공하는 코드가 포함된 스마트 콘트랙트가 특징이고, <br>
개발자들에게 블록체인에 언제, 어떤 조건에서 만들어질지 더 많은 통제권을 부여했다.

## 리플과 스텔라

리플과 스텔라는 작업 증명 방식을 사용하지 않는 암호화폐로 성공을 거뒀다.

### 리플

초기 리플은 비트코인의 오픈소스 경쟁자였으며, 제3자가 익명 교환하는 게이트웨이 방식이였지만, <br>
2014년 국경을 초월한 더 빠르고 저렴한 결제 네트워크로서 은행을 지원하는 방향으로 틀었다. <br>
리플은 XRP 합의 프로토콜이라는 새로운 유형의 합의 알고리즘을 도입하였으며, 트랜잭션에 대한 노드 합의가 필요한 비잔틴 장애 허용 정책을 사용한다.

### 스텔라

스텔라는 2014년 리플에서 근무했던 제드 맥칼렙과 조이스 김에 의해 설립됐다. <br>
초기에 리플과 비슷한 합의 메커니즘을 사용했으나, 2015년 SCP로 변경했다. <br>
전환한 이유는 2014년 스텔라 블록체인이 예기치 않게 포크되면서 두 개의 별도 네트워크가 생기고 트랜잭션에 문제가 생겼기 때문이다.

## 블록체인 확장

확장성이란 네트워크가 효율성을 개선, 유지하면서 리소스 할당을 동적으로 변경할 수 있는 능력이다. <br>
더 많은 트랜잭션이 기록됨에 따라 네트워크는 계속해서 저렴하고 쉬운 거래 방법을 제공해야 하기 때문에 확장성은 비트코인이 해결해야 할 과제였다.

비트코인은 초당 3~7개의 트랜잭션만 처리할 수 있고, Visa 결제 네트워크는 초당 65000건의 거래가 가능하다. <br>
비트코인은 탈중앙화로 네트워크가 구성되어 있고, 많은 컴퓨터에서 실행되며 중앙 제어가 없다. <br>
Visa와 비슷한 트랜잭션 처리 속도를 위해 원장에 기록되는 트랜잭션의 수를 늘려야 한다. <br>
블록 사이즈를 높이거나 각 블록에 들어가는 정보를 최소화하는 식으로 트랜잭션 처리 속도를 높이기 위해 노력하고 있다.

### 세그윗

2015년까지 비트코인 인프라의 병목 현상이 분명해졌다. 비트코인 블록마다 들어갈 수 있는 것보다 더 많은 트랜잭션들이 쌓이기 시작했다. <br>
이는 네트워크상에서 거래 시간을 늦추고, 수수료가 비싸질 수 있다는 것을 의미했다. 이에 대응하기 위해 세그윗이라는 기술을 구현하는 제안이 있었다.

세그윗은 서명 부분을 따로 Witness라는 데이터 영역으로 분리시키는 것이다. <br>
데이터 영역이 분리되면 블록 크기 계산에서 제외돼 블록의 각 트랜잭션에 필요한 전체 공간을 효과적으로 줄인다. <br>
이로 인해 각 블록에 더 많은 트랜잭션이 저장돼 트랜잭션 처리량이 증가했다. <br>
또한 공격자가 블록으로 확인되기 전에 비트코인 트랜잭션의 고유 식별자를 변경할 수 있는 공격인 트랜잭션 가변성 문제를 해결했다.

### 라이트닝

라이트닝은 일부 비트코인 거래를 별도의 채널에 올려놓고, 메인 비트코인 블록체인에서 신뢰 없이 처리한다. <br>
트랜잭션이 줄어든 네트워크는 지속적으로 유지하고 성장할 수 있게 해준다. <br>
블록이 가득차고 수수료가 늘어남에 따라 문제가 됐던 소비자 결제와 소액 결제 등이 라이트닝으로 해결될 것이다.

라이트닝 네트워크는 거래 확인을 위해 채굴자와 블록을 요구하는 대신, 당사자 간의 서명을 사용해 암호화폐 송수신 여부를 디지털로 검증한다. <br>
검증은 양방향 결제 채널의 사용을 통해 이뤄진다. 사용자들은 네트워크에 채널을 만들고 자금 지원 금액으로 알려진 것을 블록체인에 게시해야 한다. <br>
네트워크는 해시 시간 잠금 계약이라는 다중 서명 시스템으로 여러 당사자가 서로 거래할 수 있도록 한다.

### 기타 알트체인 솔루션

블록체인 트랜잭션 처리 속도를 높이기 위한 가장 일반적인 솔루션을 상태 채널과 사이드체인이라고 한다. <br>
라이트닝 네트워크는 비트코인의 전자를 보여주는 사례다. 이더리움에서 구현된 사례로는 라이덴이라는 프로젝트가 있다. <br>
상태 채널은 별도의 블록체인을 사용하지 않는 반면, 사이드체인은 사용한다. (ex. 플라즈마 롤업)

이더리움을 비롯해 질리카, NEAR 등 프로젝트들이 오랫동안 탐색해 온 확장 솔루션은 샤딩이다. <br>
전체 네트워크 작업을 샤드라고 하는 여러 네트워크 세그먼트로 분할하는 것을 포함한다. <br>
각 샤드는 고유한 계정 잔액 및 스마트 콘트랙트 집합을 의미하는 자체 독립 상태를 포함한다.

> 롤업: 메인 체인의 확장성 문제를 해결하기 위해 외부에서 트랜잭션을 실행하고 결과 정보만 메인 체인에 기록하는 것 <br>
> 플라즈마 알고리즘: 모든 거래 명세를 메인 체인에서 처리하는 기존 블록체인과 달리, 메인 체인에 연결된 자식 체인에서 사전에 수집된 정보들을 처리한 후 결과만 메인 체인에 전달함으로써 처리 속도를 향상시킨 알고리즘 

## 이더리움 클래식 포크

이더리움 클래식을 만든 최초의 이더리움 포크는 논란의 여지가 있는 포크였지만, 소프트웨어 업데이터에는 리플레이 보호가 포함되지 않았다. <br>
이더리움 클래식 포크는 2016년 6월 DAO라는 스마트 콘트랙트 실행 과정에서 치명적인 취약점을 악용한 5천만 달러 규모의 해킹에 대한 대응으로 발생했다. <br>
이더리움 커뮤니티는 두 그룹으로 나뉘었다.

- 한 그룹은 DAO 해킹을 되돌리기 위해 이더리움 코드를 업데이트하고자 했다.
- 한 그룹은 트랜잭션을 되돌리면 하나의 단체가 네트워크를 통제할 수 있게 되고, 이는 탈중앙화 네트워크의 가치를 떨어뜨릴 것이기 때문에 소프트웨어를 있는 그대로 유지하기를 원했다.

해킹을 되돌리기 위해 이더리움 마이너들에게 발급된 업데이트 소프트웨어는 개발 및 출시 속도가 빠르게 진행돼 리플레이 보호 기능이 포함되지 않았다. <br>
두 블록체인은 5개월 간 리플레이 공격에 취약했다. 이 기간동안 이더리움 소유자들은 리플레이 공격에 대비하기 위해 해결책을 직접 찾아야 했다. <br>
지갑 소유자들이 스스로를 보호한 한 가지 방법은, 각 블록체인의 자금을 그들이 총제하는 다른 지갑 주소로 보내는 것이였다. <br>
(자금이 각기 다른 주소로 분배해서, 누군가 자금에 대한 리플레이 공격을 시도하면 각 블록체인의 자금 잔액이 달라 공격이 통하지 않는 방식)





